# Telegram ç¾¤èŠç›‘å¬ç³»ç»Ÿ - é¡¹ç›®æ€»ç»“

## ðŸ“‹ é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªå®Œæ•´çš„åŸºäºŽ Python + FastAPI + Telethon çš„åœ¨çº¿ Telegram æ¶ˆæ¯ç›‘å¬å’Œè‡ªåŠ¨å›žå¤ç³»ç»Ÿï¼Œæ”¯æŒå¤šè¿›ç¨‹æž¶æž„å’Œç½‘é¡µç•Œé¢æ“ä½œã€‚

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. ç½‘é¡µé…ç½®ï¼ˆæ­¥éª¤ 0ï¼‰
- âœ… åœ¨æµè§ˆå™¨ä¸­ç›´æŽ¥é…ç½® API å‡­è¯
- âœ… æ˜¾ç¤ºèŽ·å–å‡­è¯çš„è¯¦ç»†æ­¥éª¤
- âœ… è‡ªåŠ¨ä¿å­˜é…ç½®åˆ° `api_config.json`
- âœ… é¦–æ¬¡ä½¿ç”¨æ— éœ€æ‰‹åŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶

### 2. Telegram ç™»å½•ï¼ˆæ­¥éª¤ 1-2ï¼‰
- âœ… æ‰‹æœºå·ç™»å½•
- âœ… éªŒè¯ç éªŒè¯
- âœ… äºŒæ¬¡å¯†ç æ”¯æŒ
- âœ… å¯†ç é”™è¯¯æ—¶æ”¯æŒé‡æ–°è¾“å…¥
- âœ… å‹å¥½çš„é”™è¯¯æç¤º

### 3. ç¾¤èŠé€‰æ‹©ï¼ˆæ­¥éª¤ 3ï¼‰
- âœ… èŽ·å–æ‰€æœ‰ç¾¤èŠåˆ—è¡¨
- âœ… æ˜¾ç¤ºç¾¤æˆå‘˜æ•°é‡
- âœ… ç‚¹å‡»é€‰æ‹©è¦ç›‘å¬çš„ç¾¤

### 4. ç›‘å¬é…ç½®ï¼ˆæ­¥éª¤ 4ï¼‰
- âœ… å…³é”®å­—åŒ¹é…ï¼ˆå¤šä¸ªå…³é”®å­—ï¼‰
- âœ… è‡ªåŠ¨å›žå¤æ¶ˆæ¯åˆ—è¡¨ï¼ˆå¤šæ¡æ¶ˆæ¯ï¼‰
- âœ… æ¶ˆæ¯å‘é€é—´éš”è®¾ç½®

### 5. æ¶ˆæ¯ç›‘å¬å’Œè‡ªåŠ¨å›žå¤ï¼ˆæ­¥éª¤ 5ï¼‰
- âœ… å®žæ—¶ç›‘å¬ç¾¤èŠæ–°æ¶ˆæ¯
- âœ… å…³é”®å­—åŒ¹é…è§¦å‘
- âœ… æŒ‰é¡ºåºå‘é€å›žå¤æ¶ˆæ¯
- âœ… å¯è®¾ç½®å‘é€é—´éš”
- âœ… å®žæ—¶æ˜¾ç¤ºæ—¥å¿—
- âœ… æ”¯æŒåœæ­¢ç›‘å¬

## ðŸ—ï¸ æŠ€æœ¯æž¶æž„

### å¤šè¿›ç¨‹æž¶æž„
```
ä¸»è¿›ç¨‹ (FastAPI)         å·¥ä½œè¿›ç¨‹ (Telegram)
     |                           |
     |---> å‘½ä»¤é˜Ÿåˆ— ------------>|
     |                           |
     |<--- å“åº”é˜Ÿåˆ— <------------|
     |                           |
     |<--- ç»“æžœé˜Ÿåˆ— <------------|
```

### è¿›ç¨‹é€šä¿¡æœºåˆ¶
- **å‘½ä»¤é˜Ÿåˆ—**: ä¸»è¿›ç¨‹ â†’ å·¥ä½œè¿›ç¨‹
- **å“åº”é˜Ÿåˆ—**: å·¥ä½œè¿›ç¨‹ â†’ ä¸»è¿›ç¨‹
- **ç»“æžœé˜Ÿåˆ—**: å·¥ä½œè¿›ç¨‹ â†’ ä¸»è¿›ç¨‹ï¼ˆç”¨äºŽå®žæ—¶æ—¥å¿—ï¼‰

### å“åº”ç±»åž‹è¿‡æ»¤
æ¯ä¸ª API åªæŽ¥æ”¶å¯¹åº”ç±»åž‹çš„å“åº”ï¼Œé¿å…å“åº”æ··ä¹±ï¼š
- `verify_response` - ç™»å½•éªŒè¯å“åº”
- `dialogs_response` - ç¾¤èŠåˆ—è¡¨å“åº”
- `monitor_started` - ç›‘å¬å¯åŠ¨å“åº”
- ç­‰ç­‰...

## ðŸ“ é¡¹ç›®ç»“æž„

```
tg/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ pyproject.toml          # UV é¡¹ç›®é…ç½®
â”œâ”€â”€ requirements.txt        # pip ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ SETUP.md               # é…ç½®æŒ‡å—
â”œâ”€â”€ api_config.json        # API å‡­è¯ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ api.py             # FastAPI è·¯ç”±
â”‚   â”œâ”€â”€ telegram_client.py # Telegram å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ process_manager.py # è¿›ç¨‹ç®¡ç†å™¨
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ index.html     # å‰ç«¯é¡µé¢
â””â”€â”€ telegram_session.session  # Telegram ä¼šè¯ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

## ðŸš€ ä½¿ç”¨æ–¹æ³•

### å®‰è£…ä¾èµ–

#### ä½¿ç”¨ UVï¼ˆæŽ¨èï¼‰
```bash
uv sync
```

#### ä½¿ç”¨ pip
```bash
pip install -r requirements.txt
```

### å¯åŠ¨æœåŠ¡

```bash
uv run python main.py
```

æˆ–

```bash
python main.py
```

### ä½¿ç”¨æµç¨‹

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8000
2. é…ç½® API å‡­è¯ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
3. è¾“å…¥æ‰‹æœºå·å¹¶èŽ·å–éªŒè¯ç 
4. è¾“å…¥éªŒè¯ç å’ŒäºŒæ¬¡å¯†ç ï¼ˆå¦‚æžœéœ€è¦ï¼‰
5. é€‰æ‹©è¦ç›‘å¬çš„ç¾¤èŠ
6. é…ç½®å…³é”®å­—å’Œè‡ªåŠ¨å›žå¤æ¶ˆæ¯
7. å¼€å§‹ç›‘å¬

## âš ï¸ æ³¨æ„äº‹é¡¹

### éªŒè¯ç é™åˆ¶
- å¦‚æžœéªŒè¯ç é€‰é¡¹å·²ç”¨å°½ï¼Œéœ€è¦ç­‰å¾… **15-30 åˆ†é’Ÿ** åŽå†è¯•
- è¿™æ˜¯ Telegram ä¸ºé˜²æ­¢æ»¥ç”¨è€Œè®¾ç½®çš„é™åˆ¶

### äºŒæ¬¡å¯†ç 
- å¦‚æžœå¯ç”¨äº†ä¸¤æ­¥éªŒè¯ï¼Œéœ€è¦è¾“å…¥äºŒæ¬¡å¯†ç 
- å¯†ç é”™è¯¯æ—¶å¯ä»¥é‡æ–°è¾“å…¥ï¼Œæ— éœ€é‡æ–°èŽ·å–éªŒè¯ç 

### ä½¿ç”¨å»ºè®®
- åˆç†è®¾ç½®æ¶ˆæ¯å‘é€é—´éš”ï¼ˆå»ºè®®è‡³å°‘ 1 ç§’ï¼‰
- é¿å…é¢‘ç¹å‘é€æ¶ˆæ¯ï¼Œä»¥é˜²è¢«é™åˆ¶
- æ³¨æ„éµå®ˆ Telegram çš„ä½¿ç”¨æ¡æ¬¾
- ä¸è¦ç”¨äºŽåžƒåœ¾æ¶ˆæ¯æˆ–éªšæ‰°ä»–äºº

## ðŸ”§ æŠ€æœ¯ç»†èŠ‚

### ä½¿ç”¨çš„åº“
- **FastAPI**: Web æ¡†æž¶
- **Telethon**: Telegram å®¢æˆ·ç«¯åº“
- **Uvicorn**: ASGI æœåŠ¡å™¨
- **multiprocessing**: è¿›ç¨‹ç®¡ç†
- **Queue**: è¿›ç¨‹é—´é€šä¿¡

### å…³é”®æŠ€æœ¯
- **å¤šè¿›ç¨‹æž¶æž„**: ä¸»è¿›ç¨‹å’Œ TG è¿›ç¨‹åˆ†ç¦»
- **é˜Ÿåˆ—é€šä¿¡**: ä½¿ç”¨ Queue å®žçŽ°è¿›ç¨‹é—´é€šä¿¡
- **äº‹ä»¶é©±åŠ¨**: ä½¿ç”¨ Telethon äº‹ä»¶ç›‘å¬æ–°æ¶ˆæ¯
- **å“åº”è¿‡æ»¤**: é¿å…å“åº”é˜Ÿåˆ—æ··ä¹±
- **çŠ¶æ€ç®¡ç†**: æ”¯æŒäºŒæ¬¡å¯†ç çš„çŠ¶æ€è·Ÿè¸ª

### å®‰å…¨æ€§
- API å‡­è¯å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶
- è‡ªåŠ¨åŠ å…¥ `.gitignore`
- æ”¯æŒ HTTPSï¼ˆç”Ÿäº§çŽ¯å¢ƒå»ºè®®ï¼‰

## ðŸ“ å¾…ä¼˜åŒ–é¡¹

1. **ä¼šè¯æŒä¹…åŒ–**: æ”¯æŒä¼šè¯æ–‡ä»¶ç®¡ç†
2. **å¤šç¾¤ç›‘å¬**: åŒæ—¶ç›‘å¬å¤šä¸ªç¾¤
3. **æ¶ˆæ¯æ¨¡æ¿**: æ”¯æŒå˜é‡æ›¿æ¢
4. **åŽ†å²è®°å½•**: ä¿å­˜ç›‘å¬åŽ†å²
5. **ç”¨æˆ·ç®¡ç†**: å¤šç”¨æˆ·æ”¯æŒ
6. **HTTPS æ”¯æŒ**: ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²

## ðŸŽ‰ æ€»ç»“

é¡¹ç›®å·²å®Œå…¨å®žçŽ°æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- âœ… ç½‘é¡µé…ç½® API å‡­è¯
- âœ… Telegram ç™»å½•å’ŒéªŒè¯
- âœ… ç¾¤èŠé€‰æ‹©
- âœ… å…³é”®å­—ç›‘å¬
- âœ… è‡ªåŠ¨å›žå¤
- âœ… å¤šè¿›ç¨‹æž¶æž„
- âœ… å‹å¥½çš„ç”¨æˆ·ç•Œé¢
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†

ç³»ç»Ÿå·²å‡†å¤‡å¥½æŠ•å…¥ä½¿ç”¨ï¼ðŸŽŠ

